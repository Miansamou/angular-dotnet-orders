<div class="page">
  <div class="card">
    @if (loading()) {
      <div class="overlay">
        <div class="spinner"></div>
        <span>Carregando…</span>
      </div>
    }
    <header>
      <h2>Produtos</h2>
      <form [formGroup]="form" (ngSubmit)="add()" class="add">
        <input formControlName="name" placeholder="Nome do produto" />
        <input formControlName="price" type="number" step="0.01" placeholder="Preço" />
        <button type="submit" [disabled]="form.invalid">Adicionar</button>
      </form>
    </header>

    <div class="list">
      @if (!products.length) {
        <div class="empty">Nenhum produto cadastrado.</div>
      } @else {
        <table>
          <thead>
            <tr><th>Nome</th><th class="right">Preço</th></tr>
          </thead>
          <tbody>
            @for (p of products; track p.id) {
              <tr>
                <td>{{ p.name }}</td>
                <td class="right">{{ p.price | currency:'BRL' }}</td>
              </tr>
            }
          </tbody>
        </table>
      }
    </div>
  </div>
</div>
